import{j as e,r,R as Ts}from"./react-6a422704.js";import{c as Is}from"./react-dom-81c1590d.js";import{a as rt}from"./axios-28bc18a3.js";import{$ as ot,a as nt,b as lt,c as it,d as ct,e as dt,f as mt,g as Es,h as Fs,i as Ps,j as xt,k as ut,l as ht,m as pt,n as ft,o as gt,p as Ls,q as jt,r as bt,s as zs,t as yt,u as Nt,v as Ms,w as wt,x as Os,y as vt,z as St,A as Us,B as _s,C as kt,D as Bs,E as Vs,F as Ct,G as $t,H as Hs,I as At,J as Dt,K as Rt,L as Tt,M as It,N as Et,O as Ft,P as qs,Q as Ks,R as Gs,S as ge,T as je,U as Ie,V as be,W as ye,X as Pt,Y as Lt,Z as zt,_ as Ws,a0 as Mt}from"./@radix-ui-225a0ffd.js";import{c as re}from"./class-variance-authority-52f2569e.js";import{c as Qs}from"./clsx-1229b3e0.js";import{t as Ys}from"./tailwind-merge-1166cefb.js";import{H as Je,a as Xe,b as Ze,P as Js,B as Xs,L as Zs,F as ea,I as Ot,A as ta,c as sa,d as aa,e as ra,f as oa,g as na,h as la,i as ia,j as ca,k as da,l as ma,m as xa,n as ua,o as ha,p as pa,q as fa,r as ga,s as ja,t as ba,u as ya,v as Na,C as et,w as wa,x as va,y as Sa}from"./react-icons-c9b8feae.js";import{X as Ee,C as Ut,a as ka,b as _t,c as Ca,d as $a,A as Se,I as Aa}from"./lucide-react-a41e771c.js";import{L as z,B as Da}from"./react-router-dom-d16104f1.js";import{t as Fe}from"./@hookform-d2aa860b.js";import{u as Ra,F as Ta,C as Ia,b as Pe}from"./react-hook-form-0ee7bca8.js";import{o as Le,s as B,a as Ea}from"./zod-6a28afb7.js";import{u as Fa,f as tt,g as Pa,a as La,b as za,c as Ma}from"./@tanstack-042dfece.js";import{a as Bt,d as Oa,b as ze,O as Me,e as Ua,f as I}from"./react-router-f392dce8.js";import"./scheduler-765c72db.js";import"./@babel-98964cd2.js";import"./react-remove-scroll-b71c63fb.js";import"./tslib-89fde298.js";import"./react-remove-scroll-bar-0babf0e5.js";import"./react-style-singleton-c9b02a91.js";import"./get-nonce-1ea010b7.js";import"./use-sidecar-1e201c94.js";import"./use-callback-ref-601dd590.js";import"./aria-hidden-606e0ff2.js";import"./@floating-ui-3c17d046.js";import"./@remix-run-8989dd9f.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(l){if(l.ep)return;l.ep=!0;const n=s(l);fetch(l.href,n)}})();const _a=()=>e.jsx(e.Fragment,{children:e.jsx("h1",{children:"About"})}),{VITE_API_BASE_URL:Ba}={VITE_API_BASE_URL:"https://welltalk.onrender.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},st=localStorage.getItem("token"),Va="/authenticate",Ha="/users/register",v=rt.create({baseURL:Ba});st?v.defaults.headers.common.Authorization=`${st}`:delete v.defaults.headers.common.Authorization;function m(...t){return Ys(Qs(t))}const Oe=re("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-primary-500 text-white hover:bg-primary-600 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-primary-500 text-primary-500 hover:bg-primary-100 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-primary-100 text-primary-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-primary-500 underline-offset-4 hover:underline hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-full px-3",lg:"h-11 rounded-full px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=r.forwardRef(({className:t,variant:a,size:s,asChild:o=!1,...l},n)=>{const i=o?ot:"button";return e.jsx(i,{className:m(Oe({variant:a,size:s,className:t})),ref:n,...l})});N.displayName="Button";const oe=Es,te=Ps,qa=Fs,Vt=r.forwardRef(({className:t,...a},s)=>e.jsx(nt,{className:m("fixed inset-0 z-50 bg-white/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 dark:bg-slate-950/80",t),...a,ref:s}));Vt.displayName=nt.displayName;const J=r.forwardRef(({className:t,...a},s)=>e.jsxs(qa,{children:[e.jsx(Vt,{}),e.jsx(lt,{ref:s,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-slate-800 dark:bg-slate-950",t),...a})]}));J.displayName=lt.displayName;const ne=({className:t,...a})=>e.jsx("div",{className:m("flex flex-col space-y-2 text-center sm:text-left",t),...a});ne.displayName="AlertDialogHeader";const le=({className:t,...a})=>e.jsx("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a});le.displayName="AlertDialogFooter";const Ne=r.forwardRef(({className:t,...a},s)=>e.jsx(it,{ref:s,className:m("text-lg font-semibold",t),...a}));Ne.displayName=it.displayName;const ie=r.forwardRef(({className:t,...a},s)=>e.jsx(ct,{ref:s,className:m("text-sm text-slate-500 dark:text-slate-400",t),...a}));ie.displayName=ct.displayName;const Ue=r.forwardRef(({className:t,...a},s)=>e.jsx(dt,{ref:s,className:m(Oe(),t),...a}));Ue.displayName=dt.displayName;const ce=r.forwardRef(({className:t,...a},s)=>e.jsx(mt,{ref:s,className:m(Oe({variant:"outline"}),"mt-2 sm:mt-0",t),...a}));ce.displayName=mt.displayName;const X=()=>{const[t,a]=r.useState(!0);return r.useEffect(()=>{const s=setTimeout(()=>{a(!1)},1e3);return()=>clearTimeout(s)},[]),{loading:t,setLoading:a}},Ka=()=>{const[t,a]=r.useState([]),[s,o]=r.useState(0),{loading:l,setLoading:n}=X();r.useEffect(()=>{const c={headers:{Authorization:`${localStorage.getItem("token")}`}};v.get("/referrals",c).then(d=>{a(d.data.filter(h=>!h.isAccepted)),console.log(t)}).catch(d=>{console.error("Error retrieving referrals:",d)})},[s]);const i=c=>{n(!0);const d={headers:{Authorization:`${localStorage.getItem("token")}`}};v.put(`/referrals/${c}`,{isAccepted:!0},d).then(h=>{console.log(h),o(s+1)}).catch(h=>{console.error("Error accepting referral:",h)}),n(!1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:" overflow-y-auto",children:t.length===0?e.jsx("p",{className:" text-gray-500 text-sm p-2",children:"No referrals yet."}):e.jsx("ul",{className:" p-2",children:t.map(c=>e.jsxs("li",{className:"border-b px-2 rounded-md shadow-sm py-2 border mb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:" flex gap-2",children:e.jsxs("div",{className:"text-gray-500 text-sm",children:["Student ID: ",e.jsx("span",{className:"text-primary text-black",children:c.studentID})]})}),e.jsxs("div",{className:"text-gray-500 text-sm",children:["Referred by:"," ",e.jsxs("span",{className:"text-primary",children:[c.teacher.firstName," ",c.teacher.lastName]})]}),e.jsxs("div",{className:"text-gray-500 text-sm mb-1",children:["Reason:"," ",e.jsx("div",{className:" bg-gray-300 border rounded p-2",children:e.jsx("i",{className:"text-black flex flex-grow w-full break-all",children:c.reason})})]})]}),e.jsxs(oe,{children:[e.jsx(te,{asChild:!0,children:e.jsx(N,{size:"sm",className:" rounded-lg",children:"Accept"})}),e.jsxs(J,{children:[e.jsxs(ne,{children:[e.jsx(Ne,{children:"Confirmation"}),e.jsx(ie,{children:"Are you sure you want to accept this referral?"})]}),e.jsxs(le,{children:[e.jsx(ce,{children:"Cancel"}),e.jsx(Ue,{onClick:()=>i(c.id),disabled:l,children:"Accept"})," "]})]})]})]},c.id))})})})},Ht=()=>{const[t,a]=r.useState(""),[s,o]=r.useState(""),[l,n]=r.useState([]),[i,c]=r.useState(!1),[d,h]=r.useState(""),p=async()=>{const b={headers:{Authorization:`${localStorage.getItem("token")}`}};return(await v.get("https://abhorrent-soda-production.up.railway.app/getAllUser",b)).data};return{selectedStudent:t,value:t,setValue:a,query:s,setQuery:o,studentID:d,setStudentId:h,results:l,setResults:n,showResultsDropdown:i,setShowResultsDropdown:c,useFetchStudents:()=>{const[b,A]=r.useState([]);return r.useEffect(()=>{(async()=>{const f=await p();A(f)})()},[]),{students:b}},handleQueryChange:(b,A,T,f,k,D)=>{const $=b.target.value;k($),D($);const M=A.filter(H=>H.firstName.toLowerCase().includes($.toLowerCase())||H.lastName.toLowerCase().includes($.toLowerCase()));T(M),f(M.length>0)},handleStudentInput:(b,A,T,f,k,D)=>{f(b),k([]),D("");const $=A.find(M=>M.firstName+" "+M.lastName===b);$&&(T($.studentID.toString()),console.log(d))},handleClear:()=>{a(""),n([]),o("")}}},Ga=1,Wa=1e6;let ke=0;function Qa(){return ke=(ke+1)%Number.MAX_VALUE,ke.toString()}const Ce=new Map,at=t=>{if(Ce.has(t))return;const a=setTimeout(()=>{Ce.delete(t),ee({type:"REMOVE_TOAST",toastId:t})},Wa);Ce.set(t,a)},Ya=(t,a)=>{switch(a.type){case"ADD_TOAST":return{...t,toasts:[a.toast,...t.toasts].slice(0,Ga)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===a.toast.id?{...s,...a.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=a;return s?at(s):t.toasts.forEach(o=>{at(o.id)}),{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return a.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==a.toastId)}}},ue=[];let he={toasts:[]};function ee(t){he=Ya(he,t),ue.forEach(a=>{a(he)})}function G({...t}){const a=Qa(),s=l=>ee({type:"UPDATE_TOAST",toast:{...l,id:a}}),o=()=>ee({type:"DISMISS_TOAST",toastId:a});return ee({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:l=>{l||o()}}}),{id:a,dismiss:o,update:s}}function Ja(){const[t,a]=r.useState(he);return r.useEffect(()=>(ue.push(a),()=>{const s=ue.indexOf(a);s>-1&&ue.splice(s,1)}),[t]),{...t,toast:G,dismiss:s=>ee({type:"DISMISS_TOAST",toastId:s})}}const Xa=()=>{const[t,a]=r.useState(""),[s,o]=r.useState(""),[l,n]=r.useState(!1),[i,c]=r.useState(!1);r.useState([]);const d=async(x,u)=>{const j=new Date;if(new Date(`${t}T${s}`)<j){alert("Appointment date and time must not be before the current date and time"),p();return}const b={headers:{Authorization:`${localStorage.getItem("token")}`}},A={start_date:`${t}T${s}`,studentID:`${x}`},T={dateTime:`${t}T${s}`};try{if(u){const f=await v.post("/availableschedules",T,b);console.log(f.data),G({title:"Schedule set successfully",variant:"success",duration:1500}),window.location.reload()}else{const f=await v.post("/appointments",A,b);console.log(f.data),G({title:"Appointment created successfully",variant:"success",duration:1500}),window.location.reload()}p()}catch(f){console.error(u?"Error creating schedule:":"Error creating appointment:",f)}},h=x=>{const u=x.target.value;let[j,S]=u.split(":"),b="00";u.includes("pm")&&(j=(parseInt(j,10)+12).toString()),o(`${j}:${S}:${b}`)},p=()=>{a(""),o("")};return{startDate:t,setStartDate:a,startTime:s,setStartTime:o,showAnnounceSchedule:l,setShowAnnounceSchedule:n,showAppoinmentRequests:i,setShowAppoinmentRequests:c,handleSubmit:d,handleSelectTime:h,clearForm:p}},Za=()=>{const[t,a]=r.useState([]);r.useState(!1),r.useState();const[s,o]=r.useState(0);r.useEffect(()=>{const n={headers:{Authorization:`${localStorage.getItem("token")}`}};v.get("https://abhorrent-soda-production.up.railway.app/getAppointments",n).then(i=>{a(i.data.filter(c=>!c.decision))}).catch(i=>{console.error("Error retrieving requests:",i)})},[s]);const l=n=>{const i={headers:{Authorization:`${localStorage.getItem("token")}`}};v.put(`https://abhorrent-soda-production.up.railway.app/${n}`,i).then(c=>{o(s+1)}).catch(c=>{console.error("Error accepting appointment request:",c)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:" overflow-y-auto",children:t.length===0?e.jsx("p",{className:" text-gray-500 text-sm p-2",children:"No requests yet."}):e.jsx("ul",{className:" p-2",children:t.map(n=>e.jsxs("li",{className:"border-b px-2 rounded-md shadow-sm py-2 border mb-2 bg-slate-100",children:[e.jsxs("p",{className:" font-semibold",children:[n.user.firstName," ",n.user.lastName]}),e.jsxs("p",{children:["Requested on -"," ",e.jsxs("span",{className:" text-primary-500",children:[new Date(n.date).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),", ",e.jsx("br",{}),new Date(n.date).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:" flex gap-2",children:[e.jsxs("div",{className:"text-gray-500 text-sm",children:["Course: ",e.jsx("span",{className:"text-primary-500",children:n.user.course})]}),e.jsxs("div",{className:"text-gray-500 text-sm",children:["Student ID: ",e.jsx("span",{className:"text-primary-500",children:n.user.studentID})]})]},n.user.userid),e.jsxs("div",{className:"text-gray-500 text-sm mb-1 mt-2",children:["Message:",e.jsx("div",{className:" bg-gray-300 border rounded p-2",children:e.jsx("i",{className:"text-black flex flex-grow w-full break-all",children:n.message})})]}),e.jsxs(oe,{children:[e.jsx(te,{asChild:!0,children:e.jsx(N,{size:"sm",className:" rounded-lg",children:"Accept"})}),e.jsxs(J,{children:[e.jsxs(ne,{children:[e.jsx(Ne,{children:"Confirmation"}),e.jsxs(ie,{children:["Are you sure you want to accept this requested appointment? ",n.makeAppointmentid]})]}),e.jsxs(le,{children:[e.jsx(ce,{children:"Cancel"}),e.jsx(Ue,{onClick:()=>l(n.makeAppointmentid),children:"Accept"})," "]})]})]})]})]},n.user.userid))})})})},_=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:m("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",t),...a}));_.displayName="Card";const de=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:m("flex flex-col space-y-1.5 p-6",t),...a}));de.displayName="CardHeader";const se=r.forwardRef(({className:t,...a},s)=>e.jsx("h3",{ref:s,className:m("text-2xl font-semibold leading-none tracking-tight",t),...a}));se.displayName="CardTitle";const Ae=r.forwardRef(({className:t,...a},s)=>e.jsx("p",{ref:s,className:m("text-sm text-slate-500 dark:text-slate-400",t),...a}));Ae.displayName="CardDescription";const V=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:m("p-6 pt-0",t),...a}));V.displayName="CardContent";const me=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:m("flex items-center p-6 pt-0",t),...a}));me.displayName="CardFooter";const er=()=>{const[t,a]=r.useState([]),[s,o]=r.useState(!0),[l,n]=r.useState(!0),[i,c]=r.useState(!1),[d,h]=r.useState(!1),[p,x]=r.useState(0);r.useEffect(()=>{const f={headers:{Authorization:`${localStorage.getItem("token")}`}};v.get("/myappointments",f).then(k=>{a(k.data.sort((D,$)=>new Date(D.start_date).getTime()-new Date($.start_date).getTime()).filter(D=>!D.isDone)),console.log(k.data)}).catch(k=>{console.error("Error retrieving appointments:",k)})},[p]);const u=new Date().toLocaleDateString(),j=t.filter(f=>new Date(f.start_date).toLocaleDateString()===u),S=t.filter(f=>new Date(f.start_date).toLocaleDateString()!==u),b=()=>{c(!i)},A=()=>{h(!d)},T=f=>{const k={headers:{Authorization:`${localStorage.getItem("token")}`}};v.put(`/appointments/${f}`,{isDone:!0},k).then(D=>{x(Math.random()),console.log(D.data)}).catch(D=>{console.error("Error marking appointment as done:",D)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:" overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("h2",{className:"font-sans text-md top-0 pl-2",children:"Today's Appointments"}),e.jsx("div",{className:"flex items-center justify-between pr-2",onClick:b,children:i?e.jsx(Je,{className:"text-black-300 h-6 w-6 cursor-pointer",onClick:()=>{o(!s)}}):e.jsx(Xe,{className:"text-black-300 h-6 w-6 cursor-pointer",onClick:()=>{o(!s)}})})]}),j.length>0?e.jsx("ul",{className:`p-2 ${s?"":"hidden"}`,children:j.map((f,k)=>e.jsx("li",{children:e.jsxs(_,{className:"p-2 bg-primary-700",children:[e.jsx("div",{className:" flex gap-2",children:e.jsxs("div",{className:"text-gray-500 text-sm",children:["Student ID: ",e.jsx("span",{className:"text-primary text-black",children:f.studentID})]})}),e.jsxs("p",{className:" text-sm text-white",children:["Appointed by: ","",f.counselor?e.jsxs("span",{className:" text-white underline underline-offset-2 font-semibold",children:[f.counselor.firstName," ",f.counselor.lastName]}):e.jsx("span",{className:"text-primary-200",children:"Not found"})]}),e.jsxs("p",{className:" text-sm text-white",children:["Date: ","",f.start_date?e.jsxs("span",{className:" text-white underline underline-offset-2 font-semibold",children:[new Date(f.start_date).toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"})," "]}):e.jsx("span",{className:"text-primary-200",children:"Not found"})]}),e.jsxs("p",{className:" text-white text-sm",children:["Start Time:"," ",e.jsx("span",{className:" text-white underline underline-offset-2 font-semibold",children:new Date(f.start_date).toLocaleTimeString([],{hour:"numeric",minute:"numeric",hour12:!0,second:void 0})})]}),e.jsx(N,{size:"sm",className:" rounded-md text-white",onClick:()=>T(f.id),variant:"default",children:"Mark as done"})]})},k))}):e.jsx("p",{className:`text-gray-500 text-sm p-2 ${s?"":"hidden"}`,children:"No appointments today."}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("h2",{className:"font-sans text-md top-0 pl-2",children:"Upcoming Appointments"}),e.jsx("div",{className:"flex items-center justify-between pr-2",onClick:A,children:d?e.jsx(Je,{className:"text-black-300 h-6 w-6 cursor-pointer",onClick:()=>{n(!l)}}):e.jsx(Xe,{className:"text-black-300 h-6 w-6 cursor-pointer",onClick:()=>{n(!l)}})})]}),S.length>0?e.jsx("ul",{className:`p-2 ${l?"":"hidden"}`,children:S.map((f,k)=>e.jsx("li",{children:e.jsxs(_,{className:"p-2 bg-primary-700 my-1",children:[e.jsx("div",{className:" flex gap-2",children:e.jsxs("div",{className:"text-white text-sm",children:["Student ID: ",e.jsx("span",{className:"text-white underline underline-offset-2 font-semibold",children:f.studentID})]})}),e.jsxs("p",{className:" text-sm text-white",children:["Appointed by: ","",f.counselor?e.jsxs("span",{className:" text-white underline underline-offset-2 font-semibold",children:[f.counselor.firstName," ",f.counselor.lastName]}):e.jsx("span",{className:"text-primary-200",children:"Not found"})]}),e.jsxs("p",{className:" text-sm text-white",children:["Date: ","",f.start_date?e.jsxs("span",{className:" text-white underline underline-offset-2 font-semibold",children:[new Date(f.start_date).toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"})," "]}):e.jsx("span",{className:"text-primary-200",children:"Not found"})]}),e.jsxs("p",{className:" text-white text-sm",children:["Start Time:"," ",e.jsx("span",{className:" text-white underline underline-offset-2 font-semibold",children:new Date(f.start_date).toLocaleTimeString([],{hour:"numeric",minute:"numeric",hour12:!0,second:void 0})})]}),e.jsx(N,{size:"sm",className:" rounded-md text-white",onClick:()=>T(f.id),variant:"default",children:"Mark as done"})]})},k))}):e.jsx("p",{className:`text-gray-500 text-sm p-2 ${l?"":"hidden"}`,children:"No upcoming appointments."})]})})},tr=Ls,qt=r.forwardRef(({className:t,...a},s)=>e.jsx(xt,{ref:s,className:m("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...a}));qt.displayName=xt.displayName;const sr=re("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border border-slate-200 p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-slate-800",{variants:{variant:{default:"border bg-white text-slate-950 dark:bg-slate-950 dark:text-slate-50",success:"border bg-green-500 text-white dark:bg-slate-950 dark:text-slate-50",destructive:"destructive group border-red-500 bg-red-500 text-slate-50 dark:border-red-900 dark:bg-red-900 dark:text-slate-50"}},defaultVariants:{variant:"default"}}),Kt=r.forwardRef(({className:t,variant:a,...s},o)=>e.jsx(ut,{ref:o,className:m(sr({variant:a}),t),...s}));Kt.displayName=ut.displayName;const ar=r.forwardRef(({className:t,...a},s)=>e.jsx(ht,{ref:s,className:m("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-slate-200 bg-transparent px-3 text-sm font-medium ring-offset-white transition-colors hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-slate-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-slate-50 group-[.destructive]:focus:ring-red-500 dark:border-slate-800 dark:ring-offset-slate-950 dark:hover:bg-slate-800 dark:focus:ring-slate-300 dark:group-[.destructive]:border-slate-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-slate-50 dark:group-[.destructive]:focus:ring-red-900",t),...a}));ar.displayName=ht.displayName;const Gt=r.forwardRef(({className:t,...a},s)=>e.jsx(pt,{ref:s,className:m("absolute right-2 top-2 rounded-md p-1 text-slate-950/50 opacity-0 transition-opacity hover:text-slate-950 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:text-slate-50/50 dark:hover:text-slate-50",t),"toast-close":"",...a,children:e.jsx(Ee,{className:"h-4 w-4"})}));Gt.displayName=pt.displayName;const Wt=r.forwardRef(({className:t,...a},s)=>e.jsx(ft,{ref:s,className:m("text-sm font-semibold",t),...a}));Wt.displayName=ft.displayName;const Qt=r.forwardRef(({className:t,...a},s)=>e.jsx(gt,{ref:s,className:m("text-sm opacity-90",t),...a}));Qt.displayName=gt.displayName;function _e(){const{toasts:t}=Ja();return e.jsxs(tr,{children:[t.map(function({id:a,title:s,description:o,action:l,...n}){return e.jsxs(Kt,{...n,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(Wt,{children:s}),o&&e.jsx(Qt,{children:o})]}),l,e.jsx(Gt,{})]},a)}),e.jsx(qt,{})]})}const rr=()=>{r.useState(new Date);const t={borderBottom:"2px solid #769EAB",background:"transparent",outline:"none",width:"100%",height:"40px",padding:"3px 3px",marginBottom:"16px",border:"1px solid #769EAB",borderRadius:"5px"},{useFetchStudents:a,handleQueryChange:s,handleStudentInput:o,value:l,setQuery:n,setValue:i,studentID:c,query:d,setStudentId:h,setResults:p,results:x,showResultsDropdown:u,setShowResultsDropdown:j,handleClear:S}=Ht(),{students:b}=a(),{startDate:A,setStartDate:T,startTime:f,showAnnounceSchedule:k,setShowAnnounceSchedule:D,showAppoinmentRequests:$,setShowAppoinmentRequests:M,handleSubmit:H,handleSelectTime:K,clearForm:Z}=Xa(),g=y=>{s(y,b,p,j,i,n)},C=r.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap gap-10 justify-center",children:[e.jsxs("div",{className:" bg-white max-h-[400px] md:w-80 rounded-lg shadow-2xl flex flex-col border pb-3 px-2",children:[e.jsxs("div",{className:"flex items-center justify-between border-b",children:[e.jsx("h1",{className:" font-semibold text-md top-0 py-4 pl-2",children:k?"Announce a Schedule":"Set an Appointment"}),e.jsx(Ze,{className:"text-black-300 h-6 w-6 cursor-pointer",onClick:()=>D(!k)})]}),k?e.jsxs("form",{className:" px-3 pt-3",children:[e.jsx("label",{className:" text-sm text-gray-400",children:"Date"}),e.jsx("input",{name:"date",type:"date",style:t,autoComplete:"off",required:!0,value:A,onChange:y=>T(y.target.value)}),e.jsx("label",{className:" text-sm text-gray-400",children:"Time"}),e.jsx("input",{name:"time",type:"time",style:t,autoComplete:"off",required:!0,value:f,onChange:K}),e.jsx("button",{type:"submit",className:" text-sm bg-tertiary rounded-lg p-2 text-white hover:shadow-sm hover:shadow-secondary",onClick:()=>H(c,k),children:"SET SCHEDULE"})]}):e.jsxs("form",{className:" px-3 pt-3",onSubmit:y=>{y.preventDefault(),H(c,!1)},children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{ref:C,type:"text",placeholder:"Student name",style:t,onChange:g,value:l,required:!0}),e.jsx("button",{className:"text-xs text-white mb-4 cursor-pointer bg-secondary rounded-md p-1 ml-2",onClick:S,children:"clear"})]}),u&&d&&e.jsx("ul",{className:"max-h-60 overflow-y-auto absolute w-full max-w-[250px] bg-white border border-gray-300 rounded-b-md",children:x.map(y=>e.jsxs("li",{className:" w-full border p-2 cursor-pointer hover:bg-gray-100 hover:shadow-lg hover:border-secondary",onClick:()=>o(y.firstName+" "+y.lastName,b,h,i,p,n),children:[e.jsxs("p",{className:"text-sm bold",children:[y.firstName," ",y.lastName]}),e.jsxs("p",{className:"text-xs text-red-500",children:["Student ID: ",y.studentID]})]},y.userid))}),e.jsx("label",{className:" text-sm text-gray-400",children:"Date"}),e.jsx("input",{name:"date",type:"date",style:t,autoComplete:"off",required:!0,value:A,onChange:y=>T(y.target.value)}),e.jsx("label",{className:" text-sm text-gray-400",children:"Time"}),e.jsx("input",{name:"time",type:"time",style:t,autoComplete:"off",required:!0,value:f,onChange:K}),e.jsx(N,{type:"submit",className:" rounded-md",children:"SET APPOINTMENT"})]})]}),e.jsxs("div",{className:" max-h-[400px] md:w-80  overflow-y-auto rounded-lg shadow-2xl px-2 flex flex-col border bg-white",children:[e.jsx("h1",{className:" font-semibold text-md border-b bg-white py-4 pl-2",children:"My Appointments"}),e.jsx(er,{})]}),e.jsxs("div",{className:"max-h-[400px] md:w-80 rounded-lg shadow-2xl px-2 flex flex-col border bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between border-b",children:[e.jsx("h1",{className:" font-semibold text-md top-0 py-4 pl-2",children:$?"Appointment Requests":"Referred Students"}),e.jsx(Ze,{className:"text-black-300 h-6 w-6 cursor-pointer",onClick:()=>M(!$)})]}),$?e.jsx(Za,{}):e.jsx(Ka,{})]})]}),e.jsx(_e,{})]})},Yt="/assets/login-registerbg-e46d2a74.png",or=re("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Be=r.forwardRef(({className:t,...a},s)=>e.jsx(jt,{ref:s,className:m(or(),t),...a}));Be.displayName=jt.displayName;const Ve=Ta,Jt=r.createContext({}),U=({...t})=>e.jsx(Jt.Provider,{value:{name:t.name},children:e.jsx(Ia,{...t})}),we=()=>{const t=r.useContext(Jt),a=r.useContext(Xt),{getFieldState:s,formState:o}=Ra(),l=s(t.name,o);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:n}=a;return{id:n,name:t.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...l}},Xt=r.createContext({}),F=r.forwardRef(({className:t,...a},s)=>{const o=r.useId();return e.jsx(Xt.Provider,{value:{id:o},children:e.jsx("div",{ref:s,className:m("space-y-2",t),...a})})});F.displayName="FormItem";const nr=r.forwardRef(({className:t,...a},s)=>{const{error:o,formItemId:l}=we();return e.jsx(Be,{ref:s,className:m(o&&"text-red-500 dark:text-red-900",t),htmlFor:l,...a})});nr.displayName="FormLabel";const P=r.forwardRef(({...t},a)=>{const{error:s,formItemId:o,formDescriptionId:l,formMessageId:n}=we();return e.jsx(ot,{ref:a,id:o,"aria-describedby":s?`${l} ${n}`:`${l}`,"aria-invalid":!!s,...t})});P.displayName="FormControl";const lr=r.forwardRef(({className:t,...a},s)=>{const{formDescriptionId:o}=we();return e.jsx("p",{ref:s,id:o,className:m("text-sm text-slate-500 dark:text-slate-400",t),...a})});lr.displayName="FormDescription";const L=r.forwardRef(({className:t,children:a,...s},o)=>{const{error:l,formMessageId:n}=we(),i=l?String(l==null?void 0:l.message):a;return i?e.jsx("p",{ref:o,id:n,className:m("text-sm font-medium text-red-500 dark:text-red-900",t),...s,children:i}):null});L.displayName="FormMessage";const E=r.forwardRef(({className:t,type:a,...s},o)=>e.jsx("input",{type:a,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-primary-500 focus-visible:outline-1 disabled:cursor-not-allowed disabled:opacity-50",t),ref:o,...s}));E.displayName="Input";const ir=Bs,cr=Vs,Zt=r.forwardRef(({className:t,children:a,...s},o)=>e.jsxs(bt,{ref:o,className:m("flex h-10 w-full items-center justify-between rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-200 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus:ring-slate-300",t),...s,children:[a,e.jsx(zs,{asChild:!0,children:e.jsx(Ut,{className:"h-4 w-4 opacity-50"})})]}));Zt.displayName=bt.displayName;const es=r.forwardRef(({className:t,...a},s)=>e.jsx(yt,{ref:s,className:m("flex cursor-default items-center justify-center py-1",t),...a,children:e.jsx(ka,{className:"h-4 w-4"})}));es.displayName=yt.displayName;const ts=r.forwardRef(({className:t,...a},s)=>e.jsx(Nt,{ref:s,className:m("flex cursor-default items-center justify-center py-1",t),...a,children:e.jsx(Ut,{className:"h-4 w-4"})}));ts.displayName=Nt.displayName;const ss=r.forwardRef(({className:t,children:a,position:s="popper",...o},l)=>e.jsx(Ms,{children:e.jsxs(wt,{ref:l,className:m("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...o,children:[e.jsx(es,{}),e.jsx(Os,{className:m("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(ts,{})]})}));ss.displayName=wt.displayName;const dr=r.forwardRef(({className:t,...a},s)=>e.jsx(vt,{ref:s,className:m("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a}));dr.displayName=vt.displayName;const De=r.forwardRef(({className:t,children:a,...s},o)=>e.jsxs(St,{ref:o,className:m("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Us,{children:e.jsx(_t,{className:"h-4 w-4"})})}),e.jsx(_s,{children:a})]}));De.displayName=St.displayName;const mr=r.forwardRef(({className:t,...a},s)=>e.jsx(kt,{ref:s,className:m("-mx-1 my-1 h-px bg-slate-100 dark:bg-slate-800",t),...a}));mr.displayName=kt.displayName;const xr=()=>{const[t,a]=r.useState();return r.useEffect(()=>{(async()=>{try{const o={headers:{Authorization:`${localStorage.getItem("token")}`}};if(!localStorage.getItem("user"))return;const l=localStorage.getItem("user"),n=await v.get(`/users/username/${l}`,o);a(n.data)}catch(o){console.log(o)}})()},[]),{user:t,setUser:a}},as=r.createContext(null),W=()=>r.useContext(as),ur=({children:t})=>{const{user:a,setUser:s}=xr(),{loading:o,setLoading:l}=X(),n=async(d,h)=>{l(!0);try{const p=await v.post(Va,{username:d,password:h},{headers:{Authorization:localStorage.getItem("token")}});localStorage.setItem("token",p.data.token);const x={headers:{Authorization:localStorage.getItem("token")}},u=await v.get(`/users/username/${d}`,x),j=u.data.userType;return localStorage.setItem("user",d),localStorage.setItem("userType",j),s({id:u.data.id,firstName:u.data.firstName,lastName:u.data.lastName,email:u.data.email,schoolID:u.data.schoolID,userType:u.data.userType,username:d,password:""}),{success:!0,userType:j}}catch(p){return{success:!1,error:p}}finally{l(!1)}},i=async(d,h,p,x,u,j,S)=>{l(!0);try{return await v.post(Ha,JSON.stringify({firstName:d,lastName:h,email:p,schoolID:x,userType:u,username:j,password:S}),{headers:{"Content-Type":"application/json"}}),{success:!0}}catch(b){return{success:!1,error:b}}finally{l(!1)}},c=()=>{l(!0),localStorage.clear(),s(void 0),l(!1)};return e.jsx(as.Provider,{value:{user:a,loading:o,login:n,register:i,logout:c},children:t})},hr=re("relative w-full rounded-lg border border-slate-200 p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-slate-950 dark:border-slate-800 dark:[&>svg]:text-slate-50",{variants:{variant:{default:"bg-white text-slate-950 dark:bg-slate-950 dark:text-slate-50",destructive:"border-red-500/50 text-red-500 dark:border-red-500 [&>svg]:text-red-500 dark:border-red-900/50 dark:text-red-900 dark:dark:border-red-900 dark:[&>svg]:text-red-900"}},defaultVariants:{variant:"default"}}),rs=r.forwardRef(({className:t,variant:a,...s},o)=>e.jsx("div",{ref:o,role:"alert",className:m(hr({variant:a}),t),...s}));rs.displayName="Alert";const pr=r.forwardRef(({className:t,...a},s)=>e.jsx("h5",{ref:s,className:m("mb-1 font-medium leading-none tracking-tight",t),...a}));pr.displayName="AlertTitle";const os=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:m("text-sm [&_p]:leading-relaxed",t),...a}));os.displayName="AlertDescription";const fr=Le({firstName:B(),lastName:B(),email:B().email(),schoolID:B(),userType:B({required_error:"Please select a user type"}),username:B().min(3,{message:"Username must be at least 3 characters long"}),password:B().min(8,{message:"Password must be at least 8 characters long"}),confirmPassword:B()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),gr=()=>{const{register:t}=W(),[a,s]=r.useState(!1),[o,l]=r.useState(),n=Pe({resolver:Fe(fr),defaultValues:{firstName:"",lastName:"",email:"",schoolID:"",userType:"",username:"",password:"",confirmPassword:""}}),i=async c=>{s(!0);const d=Number(c.schoolID.replace(/-/g,"")),{success:h,error:p}=await t(c.firstName,c.lastName,c.email,d,c.userType,c.username,c.password);h?(l({text:"Account created successfully",isError:!1}),n.reset()):l({text:"Something went wrong.",isError:!0}),s(!1)};return e.jsx(Ve,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(i),className:" space-y-5",children:[e.jsxs("span",{className:" flex space-x-2",children:[e.jsx(U,{control:n.control,name:"firstName",render:({field:c})=>e.jsxs(F,{className:" flex-grow",children:[e.jsx(P,{children:e.jsx(E,{...c,placeholder:"Firstname",type:"text",autoComplete:"yes"})}),n.formState.errors.firstName&&e.jsx(L,{children:n.formState.errors.firstName.message})]})}),e.jsx(U,{control:n.control,name:"lastName",render:({field:c})=>e.jsxs(F,{className:" flex-grow",children:[e.jsx(P,{children:e.jsx(E,{...c,placeholder:"Lastname",type:"text",autoComplete:"yes"})}),n.formState.errors.lastName&&e.jsx(L,{children:n.formState.errors.lastName.message})]})})]}),e.jsx(U,{control:n.control,name:"email",render:({field:c})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(E,{...c,placeholder:"Email",type:"email",autoComplete:"yes"})}),n.formState.errors.email&&e.jsx(L,{children:n.formState.errors.email.message})]})}),e.jsx(U,{control:n.control,name:"schoolID",render:({field:c})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(E,{...c,placeholder:"ID number (example format: 12-3456-789)",autoComplete:"yes"})}),n.formState.errors.schoolID&&e.jsx(L,{children:n.formState.errors.schoolID.message})]})}),e.jsx(U,{control:n.control,name:"userType",render:({field:c})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsxs(ir,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(Zt,{className:" text-slate-500",children:e.jsx(cr,{placeholder:"Please select a user type"})}),e.jsxs(ss,{children:[e.jsx(De,{value:"Counselor",children:"Counselor"}),e.jsx(De,{value:"Teacher",children:"Teacher"})]})]})}),n.formState.errors.userType&&e.jsx(L,{children:n.formState.errors.userType.message})]})}),e.jsx(U,{control:n.control,name:"username",render:({field:c})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(E,{...c,placeholder:"Username",type:"text",autoComplete:""})}),n.formState.errors.username&&e.jsx(L,{children:n.formState.errors.username.message})]})}),e.jsx(U,{control:n.control,name:"password",render:({field:c})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(E,{...c,placeholder:"Password",type:"password",autoComplete:""})}),n.formState.errors.password&&e.jsx(L,{children:n.formState.errors.password.message})]})}),e.jsx(U,{control:n.control,name:"confirmPassword",render:({field:c})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(E,{...c,placeholder:"Confirm Password",type:"password",autoComplete:""})}),n.formState.errors.confirmPassword&&e.jsx(L,{children:n.formState.errors.confirmPassword.message})]})}),o&&e.jsx(rs,{className:`${o.text?o.isError?"bg-red-100":"bg-green-100":"hidden"}`,children:e.jsx(os,{children:o.text})}),e.jsx(N,{type:"submit",className:" w-full",disabled:a,children:a?"Creating account...":"Register"})]})})},jr=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center mb-5 ",children:e.jsxs(_,{className:" w-[500px] bg-opacity-95",children:[e.jsx(de,{children:e.jsx(se,{className:" text-primary-500 ",children:"Create an account"})}),e.jsx(V,{children:e.jsx(gr,{})}),e.jsx(me,{className:"flex justify-center",children:e.jsxs(Be,{className:" text-sm text-gray-300",children:["Already have an account?"," ",e.jsx(z,{to:"/login",className:" text-primary-500 hover:underline",children:"Login"})]})})]})})}),br=()=>{const[t,a]=r.useState(0),[s,o]=r.useState(0),[l,n]=r.useState(0),[i,c]=r.useState(0),d=async()=>{const u={headers:{Authorization:`${localStorage.getItem("token")}`}};await v.get("https://abhorrent-soda-production.up.railway.app/getAllUser",u).then(j=>{a(j.data.length)})},h=async()=>{const u={headers:{Authorization:`${localStorage.getItem("token")}`}};await v.get("/myPosts",u).then(j=>{o(j.data.length)})},p=async()=>{const u={headers:{Authorization:`${localStorage.getItem("token")}`}};await v.get("/myappointments",u).then(j=>{n(j.data.length)})},x=async()=>{const u={headers:{Authorization:`${localStorage.getItem("token")}`}};let j=0,S=0;await v.get("/users",u).then(b=>{j=b.data.length,b.data.forEach(T=>{T.userType==="Counselor"&&S++});const A=S/j*100;c(A)})};return r.useEffect(()=>{d(),h(),p(),x()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:" flex flex-wrap w-full gap-3",children:[e.jsx(_,{className:" md:w-72 rounded-md hover:shadow-lg cursor-pointer w-full",children:e.jsxs(V,{className:"p-4",children:[e.jsx(Js,{className:" h-10 w-10 p-2 bg-primary-200 text-primary-600 rounded-full"}),e.jsxs("div",{className:" text-right",children:[e.jsx("h1",{className:" text-5xl font-bold text-primary-500",children:t}),e.jsx("p",{className:" text-slate-300 text-sm",children:"students registered to Welltalk"})]})]})}),e.jsx(_,{className:" lg:w-72 rounded-md hover:shadow-lg cursor-pointer w-full",children:e.jsxs(V,{className:"p-4 flex justify-between my-auto h-full items-center",children:[e.jsx(Xs,{className:" h-12 w-12 p-2 bg-red-200 text-red-400 rounded-full"}),e.jsxs("span",{className:" text-right",children:[e.jsx("h1",{className:" text-6xl font-bold text-red-400",children:s}),e.jsx("p",{className:"  text-slate-300 text-sm",children:" active post"})]})]})}),e.jsx(_,{className:" md:w-72 rounded-md hover:shadow-lg cursor-pointer w-full",children:e.jsxs(V,{className:"p-4",children:[e.jsx(Zs,{className:" h-10 w-10 p-2 bg-orange-200 text-orange-600 rounded-full"}),e.jsxs("div",{className:" text-right",children:[e.jsx("h1",{className:" text-5xl font-bold text-orange-500",children:l}),e.jsx("p",{className:" text-slate-300 text-sm",children:" appointments"})]})]})}),e.jsx(_,{className:" lg:w-72 rounded-md hover:shadow-lg cursor-pointer w-full",children:e.jsxs(V,{className:"p-4 flex justify-between my-auto h-full items-center",children:[e.jsx(ea,{className:" h-12 w-12 p-2 bg-violet-200 text-violet-400 rounded-full"}),e.jsxs("span",{className:" text-right",children:[e.jsxs("h1",{className:" text-6xl font-bold text-violet-400",children:["%",i.toFixed(0)]}),e.jsx("p",{className:"  text-slate-300 text-sm",children:"of users are Counselors"})]})]})})]})})},yr="https://abhorrent-soda-production.up.railway.app/getAllUser",Nr=()=>{const[t,a]=r.useState([]);return r.useEffect(()=>{(async()=>{const o={headers:{Authorization:`${localStorage.getItem("token")}`}},l=await rt.get(`${yr}`,o);a(l.data),console.log(l.data)})()},[]),{students:t,setStudents:a}},ns=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:m("w-full caption-bottom text-sm",t),...a})}));ns.displayName="Table";const ls=r.forwardRef(({className:t,...a},s)=>e.jsx("thead",{ref:s,className:m("[&_tr]:border-b",t),...a}));ls.displayName="TableHeader";const is=r.forwardRef(({className:t,...a},s)=>e.jsx("tbody",{ref:s,className:m("[&_tr:last-child]:border-0",t),...a}));is.displayName="TableBody";const wr=r.forwardRef(({className:t,...a},s)=>e.jsx("tfoot",{ref:s,className:m("border-t bg-slate-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-slate-800/50",t),...a}));wr.displayName="TableFooter";const pe=r.forwardRef(({className:t,...a},s)=>e.jsx("tr",{ref:s,className:m("border-b transition-colors hover:bg-slate-100/50 data-[state=selected]:bg-slate-100 dark:hover:bg-slate-800/50 dark:data-[state=selected]:bg-slate-800",t),...a}));pe.displayName="TableRow";const cs=r.forwardRef(({className:t,...a},s)=>e.jsx("th",{ref:s,className:m("h-12 px-4 text-left align-middle font-medium text-slate-500 [&:has([role=checkbox])]:pr-0 dark:text-slate-400",t),...a}));cs.displayName="TableHead";const Re=r.forwardRef(({className:t,...a},s)=>e.jsx("td",{ref:s,className:m("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a}));Re.displayName="TableCell";const vr=r.forwardRef(({className:t,...a},s)=>e.jsx("caption",{ref:s,className:m("mt-4 text-sm text-slate-500 dark:text-slate-400",t),...a}));vr.displayName="TableCaption";const He=qs,qe=Ks,ds=Gs,Sr=r.forwardRef(({className:t,inset:a,children:s,...o},l)=>e.jsxs(Ct,{ref:l,className:m("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-slate-100 data-[state=open]:bg-slate-100 dark:focus:bg-slate-800 dark:data-[state=open]:bg-slate-800",a&&"pl-8",t),...o,children:[s,e.jsx(Ca,{className:"ml-auto h-4 w-4"})]}));Sr.displayName=Ct.displayName;const kr=r.forwardRef(({className:t,...a},s)=>e.jsx($t,{ref:s,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",t),...a}));kr.displayName=$t.displayName;const ve=r.forwardRef(({className:t,sideOffset:a=4,...s},o)=>e.jsx(Hs,{children:e.jsx(At,{ref:o,sideOffset:a,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",t),...s})}));ve.displayName=At.displayName;const ae=r.forwardRef(({className:t,inset:a,...s},o)=>e.jsx(Dt,{ref:o,className:m("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",a&&"pl-8",t),...s}));ae.displayName=Dt.displayName;const ms=r.forwardRef(({className:t,children:a,checked:s,...o},l)=>e.jsxs(Rt,{ref:l,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",t),checked:s,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Tt,{children:e.jsx(_t,{className:"h-4 w-4"})})}),a]}));ms.displayName=Rt.displayName;const Cr=r.forwardRef(({className:t,children:a,...s},o)=>e.jsxs(It,{ref:o,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Tt,{children:e.jsx($a,{className:"h-2 w-2 fill-current"})})}),a]}));Cr.displayName=It.displayName;const Ke=r.forwardRef(({className:t,inset:a,...s},o)=>e.jsx(Et,{ref:o,className:m("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...s}));Ke.displayName=Et.displayName;const Ge=r.forwardRef(({className:t,...a},s)=>e.jsx(Ft,{ref:s,className:m("-mx-1 my-1 h-px bg-slate-100 dark:bg-slate-800",t),...a}));Ge.displayName=Ft.displayName;function $r({columns:t,data:a}){var h,p;const[s,o]=r.useState([]),[l,n]=r.useState([]),[i,c]=r.useState({}),d=Fa({data:a,columns:t,onSortingChange:o,getCoreRowModel:Pa(),getPaginationRowModel:La(),getSortedRowModel:za(),onColumnFiltersChange:n,getFilteredRowModel:Ma(),onColumnVisibilityChange:c,state:{sorting:s,columnFilters:l,columnVisibility:i}});return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center py-4 ",children:[e.jsx(E,{placeholder:"Filter emails...",value:(h=d.getColumn("email"))==null?void 0:h.getFilterValue(),onChange:x=>{var u;return(u=d.getColumn("email"))==null?void 0:u.setFilterValue(x.target.value)},className:"max-w-sm"}),e.jsxs(He,{children:[e.jsx(qe,{asChild:!0,children:e.jsx(N,{variant:"outline",className:"ml-auto",children:"Columns"})}),e.jsx(ve,{align:"end",children:d.getAllColumns().filter(x=>x.getCanHide()).map(x=>e.jsx(ms,{className:"capitalize",checked:x.getIsVisible(),onCheckedChange:u=>x.toggleVisibility(!!u),children:x.id},x.id))})]})]}),e.jsx("div",{className:"rounded-md border bg-white",children:e.jsxs(ns,{children:[e.jsx(ls,{children:d.getHeaderGroups().map(x=>e.jsx(pe,{children:x.headers.map(u=>e.jsx(cs,{children:u.isPlaceholder?null:tt(u.column.columnDef.header,u.getContext())},u.id))},x.id))}),e.jsx(is,{children:(p=d.getRowModel().rows)!=null&&p.length?d.getRowModel().rows.map(x=>e.jsx(pe,{"data-state":x.getIsSelected()&&"selected",children:x.getVisibleCells().map(u=>e.jsx(Re,{children:tt(u.column.columnDef.cell,u.getContext())},u.id))},x.id)):e.jsx(pe,{children:e.jsx(Re,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})})]})})]})}const Ar=[{accessorKey:"firstName",header:({column:t})=>e.jsxs(N,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Firstname",e.jsx(Se,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"lastName",header:({column:t})=>e.jsxs(N,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Lastname",e.jsx(Se,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"email",header:({column:t})=>e.jsxs(N,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Email",e.jsx(Se,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"course",header:"Course"},{accessorKey:"studentID",header:"Student ID"},{accessorKey:"chat",header:"Chat"}],Dr=()=>{const{students:t}=Nr();return e.jsx("div",{className:"container mx-auto py-10",children:e.jsx($r,{columns:Ar,data:t})})},Rr=()=>{const[t,a]=r.useState(!1),s=Bt();W();const o=localStorage.getItem("token"),l=localStorage.getItem("userType")==="Counselor";return o&&setTimeout(()=>{s(l?"/home":"/student-referral")},1e3),r.useEffect(()=>{(()=>{a(!0)})()},[]),e.jsx("div",{className:"flex flex-col h-screen w-full top-0 left-0 bg-gray-900 bg-opacity-70 justify-center items-center absolute",children:o?e.jsxs("p",{className:" text-white",children:["You are already logged in. Redirecting to ",e.jsx("span",{className:" text-primary-500",children:l?"Home":"Student Referral"}),"..."]}):e.jsx("p",{className:" text-white",children:"Please wait while getting user info..."})})},Tr=Le({username:B().min(1,{message:"Username is required"}),password:B().min(1,{message:"Password is required"})}),Ir=()=>{const[t,a]=r.useState(!1),[s,o]=r.useState(!1),{login:l}=W(),n=Bt(),i=Pe({resolver:Fe(Tr),defaultValues:{username:"",password:""}}),c=async d=>{o(!0);try{const{success:h,userType:p,error:x}=await l(d.username,d.password);if(h){G({variant:"success",title:"Success",description:"Login success. Redirecting...",duration:1500});const u=setTimeout(()=>{n(p==="Counselor"?"/home":"/student-referral")},2e3);return i.reset(),()=>clearTimeout(u)}else x.message==="Network Error"?(a(!0),G({variant:"destructive",title:"Error",description:"No connection to the server",duration:2e3})):(a(!0),G({variant:"destructive",title:"Login failed",description:"Invalid username or password. Please try again.",duration:2e3}))}catch(h){console.log(h)}finally{o(!1)}};return e.jsx(e.Fragment,{children:e.jsx(Ve,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:" space-y-5 ",children:[e.jsx(U,{control:i.control,name:"username",render:({field:d})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(E,{...d,autoComplete:"on",placeholder:"Username"})}),e.jsx(L,{})]})}),e.jsx(U,{control:i.control,name:"password",render:({field:d})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(E,{type:"password",...d,autoComplete:"off",placeholder:"Password"})}),e.jsx(L,{})]})}),e.jsx(N,{type:"submit",className:" w-full",disabled:s,children:s?"Logging in...":"Log in"})]})})})},Er=()=>{const{loading:t}=X();return e.jsxs("div",{className:" h-full flex",children:[e.jsxs(_,{className:" sm:w-[420px] mx-auto my-auto bg-opacity-95",children:[e.jsx(de,{children:e.jsx(se,{className:" text-primary-500",children:"Log in"})}),e.jsxs(V,{children:[e.jsx(Ir,{}),e.jsx(z,{to:"/",className:" text-primary-500 hover:underline hover:underline-offset-2 text-xs flex justify-end",children:"Forgot password?"})]}),e.jsx(me,{className:"flex justify-center",children:e.jsxs("div",{className:" text-sm space-x-1",children:[e.jsx("span",{className:" text-gray-300",children:" Don't have an account?"}),e.jsx(z,{to:"/register",className:" text-primary-500 hover:underline hover:underline-offset-2 font-semibold",children:"Create an account"})]})})]}),e.jsx(_e,{}),t&&e.jsx(Rr,{})]})},Fr="/assets/formbg-686d3ed1.png",Pr={backgroundImage:`url(${Fr})`,backgroundSize:" 50%",backgroundPosition:"right",backgroundRepeat:"no-repeat"},Lr={backgroundImage:`url(${Yt})`,backgroundSize:" 100%",backgroundRepeat:"no-repeat"},zr="users",Mr=()=>{const t={borderBottom:"2px solid #769EAB",background:"transparent",outline:"none",width:"100%",padding:"2px 2px",marginBottom:"16px"},[a,s]=r.useState({firstName:"",lastName:"",email:"",schoolID:"",userType:"",username:"",password:"",confirmPassword:""}),[o,l]=r.useState(!1),[n,i]=r.useState(""),c=p=>{s({...a,[p.target.name]:p.target.value}),i(p.target.value)},d=async p=>{if(p.preventDefault(),a.email!==""&&!a.email.includes("@cit.edu")){alert("Please use your institutional email");return}try{const x=await v.get(zr+`/${a.email}`);console.log("Email exists in the database."),console.log(x.data),l(!0)}catch{alert("Something went wrong. Please try again.")}},h=async p=>{p.preventDefault()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col h-screen w-full bg-gray-100 justify-center items-center absolute",style:Lr,children:e.jsxs("div",{className:" w-[720px] rounded-2xl bg-white shadow-md h-auto flex justify-between",style:Pr,children:[e.jsxs("form",{className:"py-6 px-10 left-0 w-[360px] flex flex-col",onSubmit:o?h:d,children:[e.jsx("h1",{className:"text-center font-medium text-primary text-2xl mb-3",children:o?"Enter OTP":"Please verify your email"}),o&&e.jsx("input",{name:"otp",type:"text",style:t,onChange:c,placeholder:"Please check your email for OTP",autoComplete:"off",required:!0}),!o&&e.jsx("input",{name:"email",type:"email",style:t,onChange:c,placeholder:"Institutional Email",autoComplete:"off",required:!0}),o&&e.jsx("button",{type:"submit",className:"bg-primary rounded-full h-10 text-white hover:shadow-sm hover:shadow-primary mt-2",children:"Verify OTP"}),!o&&e.jsx("button",{type:"submit",className:" bg-primary rounded-full h-10 text-white hover:shadow-sm hover:shadow-primary mt-2",children:"Check Email"}),e.jsxs("p",{className:"text-secondary text-xs my-2",children:["Already have an account?"," ",e.jsx(z,{to:"/login",className:"font-bold text-primary cursor-pointer",children:"Login"})]})]}),e.jsx("div",{className:"flex relative justify-end px-6 py-5",children:e.jsx(z,{to:"/",children:e.jsx(Ot,{className:"top-0 right-0 text-secondary hover:text-primary cursor-pointer"})})})]})})})},Or=()=>{const t={borderBottom:"2px solid #769EAB",background:"transparent",outline:"none",width:"100%",padding:"2px 2px",marginBottom:"16px"},[a,s]=r.useState({}),[o,l]=r.useState(""),[n,i]=r.useState(!1),[c,d]=r.useState(!1),[h,p]=r.useState([]),[x,u]=r.useState(0),j=h.filter(w=>w.isAccepted),S=h.filter(w=>!w.isAccepted),[b,A]=r.useState(!1),{useFetchStudents:T,handleQueryChange:f,handleStudentInput:k,value:D,setQuery:$,setValue:M,studentID:H,query:K,setStudentId:Z,setResults:g,results:C,showResultsDropdown:y,setShowResultsDropdown:O,handleClear:Q}=Ht(),{students:Qe}=T(),vs=r.useRef(null),Ss=w=>{const R=w.target.value;l(R),console.log(R),i(R==="Other")},ks=w=>{const R=w.target.value;l(R),console.log(R)};r.useEffect(()=>{(async()=>{try{const R={headers:{Authorization:`${localStorage.getItem("token")}`}},Ye=localStorage.getItem("user"),xe=await v.get(`/users/username/${Ye}`,R);console.log(xe.data),s(xe.data)}catch(R){console.log(R)}})()},[]);const Cs=async w=>{w.preventDefault(),A(!0);try{const R=await v.post("/referrals?teacher="+a.id,{reason:o,studentID:H});console.log(R.data),alert("Student referred successfully!"),M(""),$(""),g([]),l(""),i(!1),u(Math.random())}catch(R){console.log(R)}finally{A(!1)}},$s=w=>{f(w,Qe,g,O,M,$)},As=()=>{d(!0)},Ds=()=>{d(!1)};return r.useEffect(()=>{(async()=>{try{const R={headers:{Authorization:`${localStorage.getItem("token")}`}},xe=(await v.get("/referrals",R)).data.filter(Rs=>Rs.teacher.id===a.id);p(xe)}catch(R){console.log(R)}})()},[a.id,x]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:" h-full",children:[e.jsxs("div",{className:" px-4 flex justify-between",children:[e.jsxs("h1",{children:["Good day! ","",e.jsxs("b",{children:[a?a.firstName:""," ",a?a.lastName:""]})]}),e.jsx("button",{onClick:As,className:" rounded-full bg-tertiary text-white p-2 text-xs hover:bg-opacity-90",children:"Check status of referrals"})]}),c&&e.jsx("div",{className:" overflow-y-auto fixed z-50 h-screen w-full bg-gray-900 bg-opacity-70 top-0 right-0 flex items-center justify-center",children:e.jsxs("div",{className:" bg-white w-96 h-[500px] overflow-y-auto rounded-lg flex flex-col",children:[e.jsxs("span",{className:" flex justify-between w-full py-2",children:[e.jsx("h1",{children:""}),e.jsx(ta,{className:" cursor-pointer mr-3 mt-3 hover:text-primary",onClick:Ds})]}),e.jsx("span",{className:" px-2 flex justify-center w-full sticky mb-4",children:e.jsx("b",{children:"Referral Status"})}),e.jsxs("span",{className:" w-full px-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm mb-2 font-semibold",children:"Accepted Referrals"}),e.jsx("ul",{children:j.map(w=>e.jsxs("li",{className:" bg-tertiary rounded-md py-3 text-white px-2 text-sm mb-2 shadow",children:[e.jsxs("h1",{children:["Student ID: ",e.jsx("strong",{children:w.studentID})]}),e.jsxs("div",{className:" flex justify-between ",children:[e.jsxs("p",{className:" text-xs text-gray-400",children:["Counselor:"," ",w.counselor?e.jsxs("span",{className:" text-white",children:[w.counselor.firstName," ",w.counselor.lastName]}):""]}),e.jsx("p",{children:w.isAccepted?e.jsx("span",{className:" text-green-500",children:"Accepted"}):e.jsx("span",{className:" text-red-500",children:"Pending"})})]}),e.jsxs("p",{className:" text-xs text-gray-400",children:["Reason: ",e.jsx("span",{className:" text-white",children:w.reason})]})]},w.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:" text-sm mb-2 font-semibold",children:"Pending Referrals"}),e.jsx("ul",{children:S.map(w=>e.jsxs("li",{className:" bg-tertiary rounded-md py-3 text-white px-2 text-sm mb-2 shadow",children:[e.jsxs("h1",{children:["Student ID: ",e.jsxs("strong",{children:[w.studentID," "]})]}),e.jsxs("div",{className:" flex justify-between",children:[e.jsxs("p",{className:" text-xs text-gray-400",children:["Reason: ",e.jsx("span",{className:" text-white",children:w.reason})]}),e.jsx("p",{children:w.isAccepted?e.jsx("span",{className:" text-green-500",children:"Accepted"}):e.jsx("span",{className:" text-red-500",children:"Pending"})})]})]},w.id))})]})]})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx("h1",{className:"font-semibold text-2xl",children:"REFER SOMEONE NOW"}),e.jsxs("form",{className:"py-6 left-0 w-[300px] flex flex-col",onSubmit:Cs,children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("input",{ref:vs,type:"text",placeholder:"Input student name or ID number",style:t,onChange:$s,value:D,required:!0}),e.jsx("button",{className:"text-xs text-white mb-4 cursor-pointer bg-secondary rounded-md p-1",onClick:Q,children:"clear"})]}),e.jsx("div",{children:y&&K&&e.jsx("ul",{className:"max-h-60 overflow-y-auto absolute w-full max-w-[300px] bg-white border border-gray-300 rounded-b-md",children:C.map(w=>e.jsxs("li",{className:" w-full border p-1 cursor-pointer hover:bg-gray-100 hover:shadow-lg hover:border-secondary",onClick:()=>k(w.firstName+" "+w.lastName,Qe,Z,M,g,$),children:[e.jsxs("p",{className:"text-sm ",children:[w.firstName," ",w.lastName]}),e.jsxs("p",{className:"text-xs text-gray-300",children:["Student ID: ",w.userid]})]},w.userid))})}),e.jsxs("select",{name:"userType",required:!0,className:"mb-3 text-gray-400 outline-none text-sm border-2 border-secondary rounded-md p-2",defaultValue:"label",onChange:Ss,children:[e.jsx("option",{disabled:!0,value:"label",hidden:!0,children:"Reason/s for referrals"}),e.jsx("option",{value:"Sample 1",children:"Reason 1"}),e.jsx("option",{value:"Sample 2",children:"Reason 2"}),e.jsx("option",{value:"Sample 3",children:"Reason 3"}),e.jsx("option",{value:"Other",children:"Others, please specify"})]}),n&&e.jsx("input",{type:"text",placeholder:"If other/s",style:t,onChange:ks}),e.jsx(N,{disabled:b,type:"submit",children:b?"Submitting...":"Submit"})]})]})]})})},Ur=Le({title:B(),content:B(),photoData:Ea()}),xs=r.forwardRef(({className:t,...a},s)=>e.jsx("textarea",{className:m("flex min-h-[80px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-300 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",t),ref:s,...a}));xs.displayName="Textarea";const _r=()=>{const[t,a]=r.useState(null),[s,o]=r.useState(null),[l,n]=r.useState(null),[i,c]=r.useState(!1),d=Pe({resolver:Fe(Ur),defaultValues:{title:"",content:"",photoData:""}}),h=x=>{var j;o(null);const u=(j=x.target.files)==null?void 0:j[0];if(u){n(u);const S=new FileReader;S.onloadend=()=>{a(S.result)},u.type.match("image.*")?S.readAsDataURL(u):o("File type not supported")}else n(null)},p=async x=>{c(!0);const u=new FormData;u.append("title",x.title),u.append("content",x.content),l&&u.append("photoData",l),console.log(u);const j={title:x.title,content:x.content},S={headers:{Authorization:`${localStorage.getItem("token")}`}};try{x.photoData[0]?(console.log("with photo"),await v.post("/posts/photo",u,S),window.location.reload()):(console.log("without photo"),await v.post("/posts",j,S),window.location.reload())}catch(b){console.log(b)}finally{c(!1)}};return e.jsx(e.Fragment,{children:e.jsx(Ve,{...d,children:e.jsxs("form",{className:"space-y-3 max-h-[600px]",onSubmit:d.handleSubmit(p),children:[e.jsx(U,{control:d.control,name:"title",render:({field:x})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(E,{...x,placeholder:"Title",type:"text"})}),d.formState.errors.title&&e.jsx(L,{children:d.formState.errors.title.message})]})}),e.jsx(U,{control:d.control,name:"content",render:({field:x})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(xs,{...x,placeholder:"Content",className:" resize-none"})}),d.formState.errors.content&&e.jsx(L,{children:d.formState.errors.content.message})]})}),e.jsx(U,{control:d.control,name:"photoData",render:({field:x})=>e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(E,{...x,placeholder:"Photo",type:"file",onChange:u=>{x.onChange(u),h(u)}})}),s&&e.jsx(L,{children:s})]})}),t&&!s&&e.jsx("span",{className:"border-2 w-full h-80 flex items-center",children:e.jsx("img",{src:t,className:"rounded-md p-2 mx-auto h-80",alt:"preview"})}),e.jsx(N,{type:"submit",className:" w-full",disabled:i,children:i?"Posting...":"Post"})]})})})};function q({className:t,...a}){return e.jsx("div",{className:m("animate-pulse rounded-md bg-slate-100 dark:bg-slate-800",t),...a})}const Br=()=>e.jsxs(_,{className:" mx-auto mb-3 md:w-[700px] h-96",children:[e.jsx(de,{children:e.jsxs("div",{className:" flex items-center space-x-2",children:[e.jsx(q,{className:"rounded-full h-10 w-10"}),e.jsxs("div",{className:" flex flex-col space-y-1",children:[e.jsx(q,{className:" w-52 h-4"}),e.jsx(q,{className:" w-44 h-2"})]})]})}),e.jsxs(V,{className:" space-y-2",children:[e.jsx(q,{className:" md:w-full h-4"}),e.jsx(q,{className:" md:w-96 h-4"}),e.jsx(q,{className:" md:w-full h-3"})]}),e.jsxs(me,{className:" space-y-2",children:[e.jsx(q,{className:" w-24 h-4"}),e.jsx(q,{className:" w-24 h-4"})]})]}),Vr=Lt,Hr=zt,qr=Pt,Kr=Ie,us=r.forwardRef(({className:t,...a},s)=>e.jsx(ge,{ref:s,className:m("fixed inset-0 z-50 bg-white/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 dark:bg-slate-950/80",t),...a}));us.displayName=ge.displayName;const hs=r.forwardRef(({className:t,children:a,...s},o)=>e.jsxs(qr,{children:[e.jsx(us,{}),e.jsxs(je,{ref:o,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full dark:border-slate-800 dark:bg-slate-950",t),...s,children:[a,e.jsxs(Ie,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500 dark:ring-offset-slate-950 dark:focus:ring-slate-300 dark:data-[state=open]:bg-slate-800 dark:data-[state=open]:text-slate-400",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));hs.displayName=je.displayName;const ps=({className:t,...a})=>e.jsx("div",{className:m("flex flex-col space-y-1.5 text-center sm:text-left",t),...a});ps.displayName="DialogHeader";const fs=({className:t,...a})=>e.jsx("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a});fs.displayName="DialogFooter";const gs=r.forwardRef(({className:t,...a},s)=>e.jsx(be,{ref:s,className:m("text-lg font-semibold leading-none tracking-tight",t),...a}));gs.displayName=be.displayName;const js=r.forwardRef(({className:t,...a},s)=>e.jsx(ye,{ref:s,className:m("text-sm text-slate-500 dark:text-slate-400",t),...a}));js.displayName=ye.displayName;const Gr=({...t})=>{const[a,s]=Ts.useState(!1),o=async()=>{try{s(!0),await v.delete(`/posts/${t.postid}`),a?G({title:"Post deleted",description:"Your post has been deleted successfully",variant:"success",duration:1500}):window.location.reload()}catch(l){console.log(l)}finally{s(!1)}};return e.jsx(e.Fragment,{children:e.jsxs(Vr,{children:[e.jsxs(He,{children:[e.jsx(qe,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"icon",className:" rounded-full p-1 mr-2 text-slate-500 cursor-pointer",children:e.jsx(sa,{className:"h-5 w-5"})})}),e.jsxs(ve,{className:"w-56",children:[e.jsx(Ke,{children:"More options"}),e.jsx(Ge,{}),e.jsxs(ds,{children:[e.jsx(ae,{children:"Edit"}),e.jsx(Hr,{asChild:!0,children:e.jsx(ae,{children:"Delete"})})]})]})]}),e.jsxs(hs,{children:[e.jsxs(ps,{children:[e.jsx(gs,{children:"Are you sure?"}),e.jsx(js,{children:"This action cannot be undone. Are you sure you want to permanently delete this post?"})]}),e.jsxs(fs,{children:[e.jsx(Kr,{asChild:!0,children:e.jsx(N,{variant:"secondary",children:"Cancel"})}),e.jsx(N,{variant:"destructive",onClick:o,children:"Delete"})]})]}),e.jsx(_e,{})]})})},fe=({name:t,className:a})=>{const[s,o]=r.useState("");return r.useEffect(()=>{const l={"red-400":"bg-red-400","blue-400":"bg-blue-400","green-400":"bg-green-400","yellow-400":"bg-yellow-400","indigo-400":"bg-indigo-400","pink-400":"bg-pink-400","purple-400":"bg-purple-400","gray-400":"bg-gray-400"},n=Object.keys(l),i=n[Math.floor(Math.random()*n.length)];o(l[i])},[]),e.jsx("div",{className:m`${s} rounded-full h-12 w-12 flex justify-center items-center shrink-0 text-white ${a}`,children:t})},Wr=({children:t})=>{const a=i=>{const c=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/gm;return i.match(c)},s=i=>a(i)?`<a href="${i}" class="linkify-link">${i}</a>`:i,n=t.split(" ").map((i,c)=>s(i)).join(" ");return e.jsx("span",{dangerouslySetInnerHTML:{__html:n}})},Qr=()=>{const[t,a]=r.useState([]),[s,o]=r.useState("all");r.useState({title:"",content:"",photoData:new File([],"")});const{loading:l,setLoading:n}=X(),i=W();r.useEffect(()=>{(async()=>{n(!0);const p=s==="all"?"/posts":"/myPosts";try{const x={headers:{Authorization:`${localStorage.getItem("token")}`}},j=(await v.get(`${p}`,x)).data.sort((S,b)=>b.id-S.id);n(!1),a(j)}catch(x){console.error(x)}finally{n(!1)}})()},[s]);const c=h=>h.counselor.firstName.charAt(0)+h.counselor.lastName.charAt(0),d=i.user&&i.user.firstName.charAt(0)+i.user.lastName.charAt(0);return e.jsxs("section",{children:[e.jsx(_,{className:" md:w-[700px] mx-auto mb-3",children:e.jsxs(V,{className:" flex flex-row items-center px-3 py-5 gap-2",children:[i?e.jsx(fe,{name:`${d}`,className:" shrink-0"}):null,e.jsxs(oe,{children:[e.jsx(te,{className:" w-full rounded-md",children:e.jsx(E,{placeholder:"Post something...",className:" cursor-pointer hover:bg-gray-100 bg-gray-50"})}),e.jsx(te,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"icon",children:e.jsx(Aa,{className:"h-6 w-6 text-gray-400 "})})}),e.jsxs(J,{children:[e.jsx(ne,{children:e.jsxs("div",{className:" flex flex-row items-center justify-between",children:[e.jsx("h1",{className:" text-xl font-semibold text-primary-500",children:"Create a post"}),e.jsx(ce,{asChild:!0,type:"button",className:" h-12 w-12 text-slate-500 border-none hover",children:e.jsx(N,{variant:"ghost",size:"icon",children:e.jsx(aa,{className:"h-6 w-6"})})})]})}),e.jsx(_r,{})]})]})]})}),e.jsx(_,{className:" md:w-[700px] mx-auto mb-3",children:e.jsxs(V,{className:" flex flex-row items-center py-3 px-3 gap-3",children:[e.jsxs(N,{property:"active",onClick:()=>o("all"),variant:"ghost",size:"icon",className:`rounded-full h-8 w-auto flex flex-row gap-1 px-2 hover:text-primary-500  ${s==="all"?"text-primary-500 hover:text-primary-500 bg-primary-100":"text-gray-400"}`,children:[e.jsx(ra,{className:"h-5 w-5"})," All posts"]}),e.jsxs(N,{property:"active",onClick:()=>o("my"),variant:"ghost",size:"icon",className:`rounded-full h-8 w-auto flex flex-row gap-1 px-2 hover:text-primary-500  ${s==="my"?"text-primary-500 hover:text-primary-500 bg-primary-100":"text-gray-400"}`,children:[e.jsx(oa,{className:"h-5 w-5"})," My posts"]})]})}),l?e.jsx(Br,{}):e.jsx("div",{children:t.map(h=>e.jsxs(_,{className:" mx-auto mb-3 md:w-[700px]",children:[e.jsx(de,{className:" p-1 w-full",children:e.jsxs("div",{className:" flex p-3 gap-2 items-center",children:[e.jsx(fe,{name:c(h).toUpperCase()}),e.jsxs("span",{className:" flex-1",children:[e.jsx(se,{className:" text-lg",children:h.counselor?`${h.counselor.firstName} ${h.counselor.lastName}`:""}),e.jsx(Ae,{className:" text-xs border-b-transparent border-b hover:border-b-inherit w-min",children:h.counselor.userType})]}),s==="my"?e.jsx(Gr,{postid:h.id}):null]})}),e.jsxs(V,{className:" space-y-2 px-0",children:[e.jsx(se,{className:" text-lg font-semibold px-5",children:h.title}),e.jsx(Ae,{className:"text-sm px-5",children:e.jsx(Wr,{children:h.content})}),h.photoContent&&e.jsx("img",{src:`data:image/png;base64,${h.photoContent}`,alt:"posted image",className:" w-full border-t border-b",loading:"lazy"})]}),e.jsxs(me,{className:" p-0 mb-1 flex-col",children:[e.jsxs("div",{className:" w-full flex justify-between py-1 border-y mx-2 text-slate-400",children:[e.jsxs(N,{className:" flex-grow space-x-1",variant:"ghost",children:[e.jsx(na,{className:"h-5 w-5"})," ",e.jsx("p",{children:"Like"})]}),e.jsxs(N,{className:" flex-grow space-x-1",variant:"ghost",children:[e.jsx(la,{className:"h-4 w-4"})," ",e.jsx("p",{children:"Comment"})]})]}),e.jsxs("div",{className:" my-2 w-full flex space-x-2 px-2",children:[e.jsx(E,{className:" rounded-l-full rounded-r-full bg-gray-50 hover:bg-gray-100 cursor-pointer flex-grow",placeholder:"Comment..."}),e.jsx(N,{className:" rounded-r-full",variant:"default",children:"Comment"})]})]})]},h.id))})]})},Yr=()=>{const t="0123456789ABCDEF";let a="#";for(let s=0;s<6;s++)a+=t[Math.floor(Math.random()*16)];return a},Jr=()=>{const[t,a]=r.useState(!1),[s,o]=r.useState([]),[l,n]=r.useState(null),[i,c]=r.useState(null),[d,h]=r.useState({title:"",content:"",color:""}),[p,x]=r.useState({title:"",content:"",color:""}),[u,j]=r.useState(0),[S,b]=r.useState(!1),[A,T]=r.useState(!1),f=async()=>{try{const g={headers:{Authorization:localStorage.getItem("token")}},C=await v.get("/myNotes",g),y=C.data.sort((O,Q)=>Q.id-O.id);o(y),y.length>0&&n(y[0].id),c(y[0].id),console.log(C.data)}catch(g){console.error(g)}};r.useEffect(()=>{f()},[u]);const k=g=>{const C=s.find(y=>y.id===g);C&&(g!==i&&b(!1),c(g),n(g),x({title:C.title,content:C.content,color:C.color}))},D=g=>{const{name:C,value:y}=g.target;h(O=>({...O,[C]:y})),console.log(d)},$=g=>{const{name:C,value:y}=g.target;x(O=>({...O,[C]:y}))},M=async g=>{g.preventDefault();const C={headers:{Authorization:localStorage.getItem("token")}};try{const y=Yr(),O=await v.post("/notes",{...d,color:y},C);alert("Note created successfully"),h({title:"",content:"",color:y}),console.log(O.data),j(Math.random())}catch(y){console.log(y)}K()},H=()=>{a(!0)},K=()=>{a(!1)},Z=async g=>{g.preventDefault();const C={headers:{Authorization:localStorage.getItem("token")}},y={title:p.title,content:p.content};try{const O=i,Q=await v.put(`/notes/${O}`,y,C);x({title:"",content:"",color:""}),j(Math.random()),console.log(Q.data),alert("Note updated successfully"),console.log(Q.data)}catch(O){console.log(O)}b(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" absolute bottom-0 right-0 pb-8 pr-8",children:e.jsxs("button",{onClick:H,className:" overflow-hidden py-2 flex items-center px-3 bg-tertiary shadow bg-opacity-90 rounded-full text-white hover:bg-opacity-100 hover:shadow-md",children:[e.jsx(ia,{size:15}),e.jsx("p",{children:"Add a note"})]})}),t&&e.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-900 bg-opacity-70 z-50",children:e.jsxs("div",{className:"w-[550px] max-h-[500px] overflow-auto bg-white p-3 rounded-lg flex flex-col gap-3 relative",children:[e.jsx("button",{className:"text-tertiary hover:text-primary text-xl px-4 py-2 absolute top-0 right-0",onClick:K,children:e.jsx(Ot,{})}),e.jsx("p",{className:"text-xl font-bold text-center py-4",children:"New note"}),e.jsxs("form",{onSubmit:M,children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{type:"text",name:"title",value:d.title,onChange:D,className:"w-full border-secondary border-2 rounded-md p-2 mb-2 outline-none",placeholder:"Add title here",required:!0}),e.jsx("label",{htmlFor:"content",children:"Content"}),e.jsx("textarea",{name:"content",value:d.content,onChange:D,className:"w-full border-secondary border-2 resize-none rounded-md p-2 mb-2 outline-none auto-cols-auto",placeholder:"Add note content here...",rows:4,required:!0}),e.jsx("button",{type:"submit",className:" rounded-full w-full bg-secondary border-inherit text-white p-2 outline-none",children:"Create note"})]})]})}),s.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:" w-full h-full flex overflow-auto",children:[e.jsxs("div",{className:" w-2/5 border-r shadow-md overflow-y-auto ",children:[e.jsx("h1",{className:"text-2xl font-semibold p-3",children:"My notes"}),s.map(g=>e.jsxs("div",{onClick:()=>k(g.id),className:`p-3 border-t border-b h-1/6 cursor-pointer hover:shadow-lg hover:border-secondary ${i===g.id?"bg-gray-200":""}`,style:{backgroundColor:g.color},children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:g.title}),g.content.length>50?e.jsxs("p",{className:"break-words text-justify mb-2 text-ellipsis",children:[g.content.slice(0,50),e.jsx("span",{className:" text-base font-medium",children:" .... "})]}):e.jsx("p",{className:"break-words text-justify mb-2 text-ellipsis",children:g.content})]},g.id))]}),l&&!S&&e.jsx("div",{className:" w-3/5 container flex flex-col h-full overflow-auto",children:s.filter(g=>g.id===i).map(g=>e.jsxs("div",{children:[e.jsx("div",{className:"flex w-full justify-end text-sm items-center my-3",children:e.jsxs("button",{className:" flex items-center gap-1 text-blue-500",onClick:()=>b(g.id),children:[e.jsx(ca,{}),"Edit"]})}),e.jsx("h1",{className:"text-2xl font-semibold",children:g.title}),e.jsx("textarea",{disabled:!A,className:"break-words text-justify w-full  h-screen",value:g.content}),S&&e.jsx("div",{className:`w-3/5 container flex flex-col overflow-y-hidden ${l?"":"hidden"}`,children:s.filter(C=>C.id===i).map(C=>e.jsx("div",{children:e.jsxs("form",{onSubmit:()=>Z,className:"flex w-full justify-end text-sm gap-2 items-center my-3",children:[e.jsx("button",{type:"submit",className:" flex items-center gap-1 text-white rounded-md py-1 px-2 bg-green-500",children:"Save"}),e.jsx("button",{className:" flex items-center gap-1 text-red-500",onClick:()=>b(!1),children:"Cancel"}),e.jsxs("span",{className:" flex flex-col",children:[e.jsx("input",{onChange:$,type:"text",name:"title",placeholder:"Title",className:"text-2xl font-semibold outline-none bg-gray-50",value:p.title}),e.jsx("input",{onChange:$,name:"content",type:"text",placeholder:"Content",className:"break-words text-justify outline-none bg-gray-50",value:p.content})]})]})},C.id))})]},g.id))},i),S&&e.jsx("div",{className:`w-3/5 container flex flex-col ${l?"":"hidden"}`,children:s.filter(g=>g.id===i).map(g=>e.jsx("div",{children:e.jsxs("form",{onSubmit:Z,children:[e.jsxs("span",{className:" w-full flex items-center gap-2x justify-end",children:[e.jsx("button",{type:"submit",className:" flex items-center gap-1 text-white rounded-md py-1 px-2 bg-green-500",children:"Save"}),e.jsx("button",{className:" flex items-center text-red-500",onClick:()=>b(!1),children:"Cancel"})]}),e.jsxs("span",{className:" flex flex-col",children:[e.jsx("input",{onChange:$,type:"text",name:"title",placeholder:"Title",className:"text-2xl font-semibold outline-none bg-gray-50",value:p.title}),e.jsx("input",{onChange:$,name:"content",type:"text",placeholder:"Content",className:"break-words outline-none bg-gray-50 h-full",value:p.content})]})]})},g.id))})]})}):e.jsx("div",{className:"w-full mt-40",children:e.jsx("p",{className:"text-center text-2xl font-semibold mt-10",children:"You have no notes yet"})})]})},Xr="/assets/accessdeniedimg-32862604.png",Zr=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:" h-screen w-full flex items-center justify-center",children:e.jsxs("span",{className:" pr-0 mx-10 w-auto text-center",children:[e.jsx("img",{className:" md:h-96 md:w-96",src:`${Xr}`,alt:"Access denied image"}),e.jsx("h1",{className:" text-6xl font-bold",children:"403"}),e.jsx("h1",{className:" text-3xl font-bold",children:"Access Denied"}),e.jsx("p",{className:" text-xl font-bold",children:"You are not authorized to access this page."})]})})}),Y=({component:t,userType:a})=>{const s=localStorage.getItem("userType"),o=localStorage.getItem("token"),l=s===a;return o&&l?e.jsx(t,{}):o&&!l?e.jsx(Zr,{}):e.jsx(Oa,{to:"/login"})},eo={backgroundImage:`url(${Yt})`,backgroundSize:" 100%",backgroundRepeat:"no-repeat"},to=()=>{const t=()=>{window.history.back()};return e.jsxs("div",{className:" w-full h-screen flex flex-col items-center justify-center",style:eo,children:[e.jsx("div",{className:" absolute left-0 top-0 p-4",children:e.jsxs("button",{onClick:t,className:" flex items-center gap-1 text-xl hover:text-red-500",children:[e.jsx(da,{})," ",e.jsx("span",{children:"Back"})]})}),e.jsx("div",{className:"w-1/3 justify-center flex shadow-md rounded-lg h-2/4 border-2 border-red-500 p-2",children:e.jsx("h1",{className:" text-2xl font-bold",children:"Emergency contact numbers"})})]})},$e={"/":" ","/about":" ","/login":" Login","/register":" Create an Account","/home":" Home","/dashboard":" Dashboard","/students-list":"Students","/calendar":" Calendar","/my-notes":" Notes","/email-verification":" Email Verification","/student-referral":" Student Referral","/emergency-link":" Emergency Contact Numbers"},We=()=>{const[t,a]=r.useState(""),s=ze();return r.useEffect(()=>{const o=s.pathname;document.title=` ${$e[o]||"Page Not Found"}`,$e[o]===" "&&(document.title="WellTalk"),o==="/"&&(document.title="WellTalk"),a($e[o]||"Page Not Found")},[s]),{currentPathName:t}},so=()=>e.jsx("section",{className:" h-full flex items-center ",children:e.jsxs("div",{className:" md:w-[600px] space-y-8",children:[e.jsx("h1",{className:" font-bold text-3xl sm:text-5xl tracking-normal text-primary-600 font-serif",children:"Elevating Student Support and Mental Health Services at CIT-University"}),e.jsx("p",{className:"block font-sans text-base font-normal leading-relaxed antialiased text-primary-600",children:"A website app that can automate and streamline various aspects of the Guidance Center's work, including appointment scheduling, resource sharing, and data management."}),e.jsxs("div",{className:" flex items-center space-x-2",children:[e.jsx(N,{size:"lg",className:" shadow bg-gradient-to-r from-primary-500 to-primary-300 hover:to-primary-500 font-bold ",children:"Get mobile app"}),e.jsx("h1",{className:" font-semibold text-xs text-primary-700",children:"For students."})]})]})}),ao="/assets/notfound-b73d7ef6.png",ro=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:" h-screen w-full flex items-center justify-center",children:e.jsxs("span",{className:" pr-0 mx-10 w-auto text-center",children:[e.jsx("img",{className:" md:h-96 md:w-96",src:`${ao}`,alt:"Not found page image"}),e.jsx("h1",{className:" text-6xl font-bold",children:"404"}),e.jsx("h1",{className:" text-3xl font-bold",children:"Page Not Found"})]})})}),oo=()=>e.jsxs("footer",{className:" flex bg-gray-50 py-5 bottom-0 items-center px-6 items justify-between border-t-2",children:[e.jsx("h1",{className:" text-slate-300 items-center",children:"© WellTalk | 2023 | Guia | Batulan | Nadela | Perez | Prahinog"}),e.jsxs("ul",{className:" flex gap-3 items-center text-slate-400",children:[e.jsx(ma,{size:20}),e.jsx(xa,{size:20}),e.jsx(ua,{size:20})]})]}),no="/assets/logo-91b86dfd.png",lo=()=>e.jsx(e.Fragment,{children:e.jsx("header",{children:e.jsxs("div",{className:" flex items-center justify-between mx-14 py-4",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx(z,{to:"/",children:e.jsx("img",{src:no,alt:"logo",className:" h-16 w-16"})})}),e.jsxs("div",{className:" space-x-3 md:flex-col items-center",children:[e.jsx(N,{asChild:!0,variant:"link",className:" hover:no-underline hover:text-primary-600",children:e.jsx(z,{to:"/",children:"Home"})}),e.jsx(N,{asChild:!0,variant:"link",className:" hover:no-underline hover:text-primary-600",children:e.jsx(z,{to:"/features",children:"Features"})}),e.jsx(N,{asChild:!0,variant:"link",className:" hover:no-underline hover:text-primary-600",children:e.jsx(z,{to:"/about",children:"About Us"})}),e.jsx(N,{variant:"outline",className:" hover:bg-primary-200 hover:bg-opacity-30",children:e.jsx(z,{to:"/login",children:"Login"})}),e.jsx(N,{variant:"default",children:e.jsx(z,{to:"/register",children:"Create account"})})]})]})})}),io=()=>e.jsxs("div",{className:"  flex flex-col h-screen md:bg-[url('@/media/images/defaultbg.png')] bg-no-repeat bg-origin-border bg-center bg-primary-100",children:[e.jsx("div",{children:e.jsx(lo,{})}),e.jsx("div",{className:"h-full container",children:e.jsx(Me,{})}),e.jsx("div",{children:e.jsx(oo,{})})]}),bs=({isSidebarOpen:t})=>{let a=[{icon:e.jsx(ga,{}),name:"Home",path:"/home"},{icon:e.jsx(ja,{}),name:"Dashboard",path:"/dashboard"},{icon:e.jsx(ba,{}),name:"Students",path:"/students-list"},{icon:e.jsx(ya,{}),name:"Calendar",path:"/calendar"},{icon:e.jsx(Na,{}),name:"Notes",path:"/my-notes"}];const s=ze(),[o,l]=r.useState(a.findIndex(p=>p.path==s.pathname)),{loading:n}=X(),{user:i}=W(),{logout:c}=W(),d=()=>{window.location.reload(),c()},h=i?(i==null?void 0:i.firstName.charAt(0))+(i==null?void 0:i.lastName.charAt(0)):"";return localStorage.getItem("userType")!=="Counselor"?null:e.jsxs("section",{className:"flex flex-col gap-2 bg-primary-700 px-4 py-4 h-screen w-64 animate-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-red-500 text-2xl font-semibold",children:e.jsx(ha,{})}),e.jsx("div",{className:"text-slate-700 text-2xl font-semibold",children:e.jsx(pa,{})})]}),e.jsxs("div",{className:"flex flex-col justify-center items-center mb-5",children:[e.jsx(fe,{name:h,className:" h-28 w-28 bg-slate-300 text-2xl font-bold"}),e.jsx("h1",{className:"text-white text-lg font-semibold",children:i?`${i.firstName} ${i.lastName}`:"Loading..."}),e.jsx("span",{className:"text-slate-50 text-sm",children:i?i.userType:"Loading..."})]}),a.map((p,x)=>e.jsxs(z,{to:p.path,className:o==x?"text-white font-semibold text-lg cursor-pointer flex items-center gap-3 rounded-md p-3 bg-primary-500 ":"text-gray-50 cursor-pointer text-lg flex items-center gap-3 rounded-md p-3 hover:bg-primary-500",onClick:()=>{l(x)},children:[p.icon,p.name]},x)),e.jsxs(oe,{children:[e.jsxs(te,{className:"text-gray-50 cursor-pointer text-lg flex items-center gap-3 rounded-md p-3 hover:bg-red-500",children:[e.jsx(fa,{}),"Logout"]}),e.jsxs(J,{children:[e.jsxs(ne,{children:[e.jsx(Ws,{children:"Are you sure you want to logout?"}),e.jsx(ie,{children:" All your unsaved changes will be lost. "})]}),e.jsxs(le,{children:[e.jsx(ce,{children:"Cancel"}),e.jsx(N,{variant:"destructive",onClick:d,disabled:n,children:"Logout"})]})]})]})]})},co=Lt,mo=zt,xo=Pt,ys=r.forwardRef(({className:t,...a},s)=>e.jsx(ge,{className:m("fixed inset-0 z-50 bg-white/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 dark:bg-slate-950/80",t),...a,ref:s}));ys.displayName=ge.displayName;const uo=re("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 dark:bg-slate-950",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ns=r.forwardRef(({side:t="right",className:a,children:s,...o},l)=>e.jsxs(xo,{children:[e.jsx(ys,{}),e.jsxs(je,{ref:l,className:m(uo({side:t}),a),...o,children:[s,e.jsxs(Ie,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 dark:ring-offset-slate-950 dark:focus:ring-slate-300 dark:data-[state=open]:bg-slate-800",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ns.displayName=je.displayName;const ho=r.forwardRef(({className:t,...a},s)=>e.jsx(be,{ref:s,className:m("text-lg font-semibold text-slate-950 dark:text-slate-50",t),...a}));ho.displayName=be.displayName;const po=r.forwardRef(({className:t,...a},s)=>e.jsx(ye,{ref:s,className:m("text-sm text-slate-500 dark:text-slate-400",t),...a}));po.displayName=ye.displayName;const ws=({currentPathName:t,showSidebar:a})=>{const{user:s,logout:o}=W(),[l,n]=r.useState(""),i=localStorage.getItem("userType")==="Counselor",c=()=>{s&&n((s==null?void 0:s.firstName.charAt(0))+(s==null?void 0:s.lastName.charAt(0)))};r.useEffect(()=>{c()},[s]);const d=()=>{window.location.reload(),o()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:" flex justify-between px-6 py-2 items-center shadow sticky top-0 bg-white",children:[e.jsxs("div",{className:" flex items-center gap-2",children:[i&&e.jsxs("span",{children:[e.jsx("div",{className:"md:hidden",children:e.jsxs(co,{children:[e.jsx(mo,{className:"text-primary-500 rounded-full hover:bg-slate-50 p-2",children:e.jsx(et,{size:20})}),e.jsx(Ns,{side:"left",className:"p-0 m-0 w-72 bg-inherit border-none shadow-none",children:e.jsx(bs,{})})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(N,{variant:"ghost",size:"icon",className:"text-primary-500 rounded-full hover:bg-slate-50 hover:text-primary-500",onClick:a,children:e.jsx(et,{size:20})})})]}),e.jsx("p",{className:" text-neutral-700 sm:block hidden",children:t})]}),e.jsxs("div",{className:" flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(E,{type:"search",placeholder:"Search Welltalk",className:"md:w-[100px] lg:w-[300px] bg-inherit pr-8 shadow-sm"}),e.jsx(wa,{className:"absolute top-1/2 right-2 transform -translate-y-1/2 h-5 w-5 cursor-pointer text-primary-500"})]}),!i&&e.jsxs(He,{children:[e.jsx(qe,{children:e.jsx(fe,{name:`${l}`,className:" h-8 w-8 outline outline-offset-2 outline-primary-200 "})}),e.jsxs(ve,{children:[e.jsx(Ke,{children:s?e.jsxs("p",{children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}):""}),e.jsx(Ge,{}),e.jsxs(ds,{children:[e.jsx(ae,{children:e.jsx(z,{to:"#",children:"Profile"})}),e.jsx(ae,{onClick:d,children:"Logout"})]})]})]}),e.jsx(N,{variant:"ghost",asChild:!0,size:"icon",className:" text-red-500 hover:text-red-600",children:e.jsx(z,{to:"/emergency-link",children:e.jsx(va,{className:"h-6 w-6"})})})]})]})})},fo=()=>{const[t,a]=r.useState(!1),{currentPathName:s}=We(),{loading:o}=X(),l=()=>{a(!t)};return e.jsx(e.Fragment,{children:!o&&e.jsxs("div",{className:"h-screen flex bg-slate-50",children:[!t&&e.jsx("aside",{className:" md:flex hidden",children:e.jsx(bs,{})}),e.jsxs("div",{className:" flex flex-col w-full overflow-auto scroll-smooth ",children:[e.jsx("header",{className:" sticky top-0 z-10",children:e.jsx(ws,{currentPathName:s,showSidebar:()=>{l()}})}),e.jsx("main",{className:"container mx-auto my-3",children:e.jsx(Me,{})})]})]})})},go=()=>{const{currentPathName:t}=We();return e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(ws,{currentPathName:t})}),e.jsx("div",{className:" container my-10",children:e.jsx(Me,{})})]})},Te=r.forwardRef(({className:t,orientation:a="horizontal",decorative:s=!0,...o},l)=>e.jsx(Mt,{ref:l,decorative:s,orientation:a,className:m("shrink-0 bg-slate-200 dark:bg-slate-800",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...o}));Te.displayName=Mt.displayName;function jo(){const t=ze(),[a,s]=r.useState(!1),{currentPathName:o}=We();r.useEffect(()=>{const n=()=>{const c=localStorage.getItem("token");if(c){const{exp:d}=JSON.parse(atob(c.split(".")[1]));d*1e3<Date.now()?(s(!0),localStorage.clear()):s(!1)}};n();const i=setInterval(n,1e4);return()=>{clearInterval(i)}},[t,o]);const l=()=>{localStorage.clear(),s(!1)};return a?(console.log("Token has expired"),e.jsx(oe,{open:a,onOpenChange:l,children:e.jsxs(J,{className:" bg-primary-100 bg-opacity-30",children:[e.jsxs(Ne,{className:" text-lg flex items-center gap-2",children:[e.jsx(Sa,{className:"text-yellow-500 text-3xl"}),"Session Expired"]}),e.jsx(Te,{}),e.jsx(ie,{children:"Your session has expired. Please log in again to continue using WellTalk."}),e.jsx(Te,{}),e.jsx(le,{className:"flex justify-end",children:e.jsx(N,{className:" rounded-md",onClick:l,children:"Login Again"})})]})})):e.jsx(ur,{children:e.jsxs(Ua,{children:[e.jsxs(I,{element:e.jsx(io,{}),children:[e.jsx(I,{path:"/",element:e.jsx(so,{})}),e.jsx(I,{path:"about",element:e.jsx(_a,{})}),e.jsx(I,{path:"login",element:e.jsx(Er,{})}),e.jsx(I,{path:"register",element:e.jsx(jr,{})})]}),e.jsx(I,{path:"email-verification",element:e.jsx(Mr,{})}),e.jsx(I,{path:"emergency-link",element:e.jsx(to,{})}),e.jsxs(I,{element:e.jsx(fo,{}),children:[e.jsx(I,{path:"home",element:e.jsx(Y,{userType:"Counselor",component:Qr})}),e.jsx(I,{path:"dashboard",element:e.jsx(Y,{userType:"Counselor",component:br})}),e.jsx(I,{path:"students-list",element:e.jsx(Y,{userType:"Counselor",component:Dr})}),e.jsx(I,{path:"calendar",element:e.jsx(Y,{userType:"Counselor",component:rr})}),e.jsx(I,{path:"my-notes",element:e.jsx(Y,{userType:"Counselor",component:Jr})})]}),e.jsx(I,{element:e.jsx(go,{}),children:e.jsx(I,{path:"student-referral",element:e.jsx(Y,{userType:"Teacher",component:Or})})}),e.jsx(I,{path:"*",element:e.jsx(ro,{})})]})})}Is.createRoot(document.getElementById("root")).render(e.jsx(Da,{children:e.jsx(jo,{})}));
